/**
 * Advanced Chart Animations
 * Sophisticated animations for data visualizations and charts
 */

/* ===== CHART CONTAINER ANIMATIONS ===== */
.chart-container {
  position: relative;
  overflow: hidden;
}

.chart-enter {
  opacity: 0;
  transform: scale(0.9);
}

.chart-enter-active {
  opacity: 1;
  transform: scale(1);
  transition: all 800ms cubic-bezier(0.4, 0, 0.2, 1);
}

.chart-exit {
  opacity: 1;
  transform: scale(1);
}

.chart-exit-active {
  opacity: 0;
  transform: scale(0.9);
  transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== BAR CHART ANIMATIONS ===== */
.bar-chart-enter .recharts-bar-rectangle {
  animation: barGrowUp 1000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

.bar-chart-enter .recharts-bar-rectangle:nth-child(1) { animation-delay: 100ms; }
.bar-chart-enter .recharts-bar-rectangle:nth-child(2) { animation-delay: 200ms; }
.bar-chart-enter .recharts-bar-rectangle:nth-child(3) { animation-delay: 300ms; }
.bar-chart-enter .recharts-bar-rectangle:nth-child(4) { animation-delay: 400ms; }
.bar-chart-enter .recharts-bar-rectangle:nth-child(5) { animation-delay: 500ms; }

@keyframes barGrowUp {
  from {
    transform: scaleY(0);
    transform-origin: bottom;
  }
  to {
    transform: scaleY(1);
    transform-origin: bottom;
  }
}

/* Horizontal bar animation */
.bar-chart-horizontal .recharts-bar-rectangle {
  animation: barGrowRight 1000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

@keyframes barGrowRight {
  from {
    transform: scaleX(0);
    transform-origin: left;
  }
  to {
    transform: scaleX(1);
    transform-origin: left;
  }
}

/* ===== LINE CHART ANIMATIONS ===== */
.line-chart-enter .recharts-line-curve {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: lineDrawIn 2000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

@keyframes lineDrawIn {
  to {
    stroke-dashoffset: 0;
  }
}

.line-chart-enter .recharts-line-dot {
  animation: dotPopIn 600ms cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
}

.line-chart-enter .recharts-line-dot:nth-child(1) { animation-delay: 200ms; }
.line-chart-enter .recharts-line-dot:nth-child(2) { animation-delay: 300ms; }
.line-chart-enter .recharts-line-dot:nth-child(3) { animation-delay: 400ms; }
.line-chart-enter .recharts-line-dot:nth-child(4) { animation-delay: 500ms; }
.line-chart-enter .recharts-line-dot:nth-child(5) { animation-delay: 600ms; }

@keyframes dotPopIn {
  from {
    transform: scale(0);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* ===== PIE CHART ANIMATIONS ===== */
.pie-chart-enter .recharts-pie-sector {
  animation: pieSliceIn 1000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

.pie-chart-enter .recharts-pie-sector:nth-child(1) { animation-delay: 100ms; }
.pie-chart-enter .recharts-pie-sector:nth-child(2) { animation-delay: 200ms; }
.pie-chart-enter .recharts-pie-sector:nth-child(3) { animation-delay: 300ms; }
.pie-chart-enter .recharts-pie-sector:nth-child(4) { animation-delay: 400ms; }
.pie-chart-enter .recharts-pie-sector:nth-child(5) { animation-delay: 500ms; }

@keyframes pieSliceIn {
  from {
    transform: scale(0);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* Pie chart rotation animation */
.pie-chart-rotate {
  animation: pieRotate 2000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

@keyframes pieRotate {
  from {
    transform: rotate(-90deg);
  }
  to {
    transform: rotate(0deg);
  }
}

/* ===== AREA CHART ANIMATIONS ===== */
.area-chart-enter .recharts-area-area {
  animation: areaFillIn 1500ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

@keyframes areaFillIn {
  from {
    opacity: 0;
    transform: scaleY(0);
    transform-origin: bottom;
  }
  to {
    opacity: 1;
    transform: scaleY(1);
    transform-origin: bottom;
  }
}

.area-chart-enter .recharts-area-curve {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: lineDrawIn 2000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

/* ===== SCATTER PLOT ANIMATIONS ===== */
.scatter-chart-enter .recharts-scatter-symbol {
  animation: scatterPopIn 800ms cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
}

.scatter-chart-enter .recharts-scatter-symbol:nth-child(odd) {
  animation-delay: 100ms;
}

.scatter-chart-enter .recharts-scatter-symbol:nth-child(even) {
  animation-delay: 200ms;
}

@keyframes scatterPopIn {
  from {
    transform: scale(0) rotate(180deg);
    opacity: 0;
  }
  to {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

/* ===== AXIS ANIMATIONS ===== */
.chart-axis-enter .recharts-cartesian-axis-line {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: axisDrawIn 1000ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

.chart-axis-enter .recharts-cartesian-axis-tick-line {
  animation: tickFadeIn 600ms ease both;
}

.chart-axis-enter .recharts-cartesian-axis-tick-line:nth-child(1) { animation-delay: 100ms; }
.chart-axis-enter .recharts-cartesian-axis-tick-line:nth-child(2) { animation-delay: 150ms; }
.chart-axis-enter .recharts-cartesian-axis-tick-line:nth-child(3) { animation-delay: 200ms; }
.chart-axis-enter .recharts-cartesian-axis-tick-line:nth-child(4) { animation-delay: 250ms; }
.chart-axis-enter .recharts-cartesian-axis-tick-line:nth-child(5) { animation-delay: 300ms; }

@keyframes axisDrawIn {
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes tickFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== GRID ANIMATIONS ===== */
.chart-grid-enter .recharts-cartesian-grid-horizontal line {
  animation: gridLineSlideIn 800ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

.chart-grid-enter .recharts-cartesian-grid-vertical line {
  animation: gridLineSlideIn 800ms cubic-bezier(0.4, 0, 0.2, 1) both;
  animation-delay: 200ms;
}

@keyframes gridLineSlideIn {
  from {
    opacity: 0;
    stroke-dasharray: 5, 5;
    stroke-dashoffset: 10;
  }
  to {
    opacity: 1;
    stroke-dasharray: 5, 5;
    stroke-dashoffset: 0;
  }
}

/* ===== LEGEND ANIMATIONS ===== */
.chart-legend-enter .recharts-legend-wrapper {
  animation: legendSlideUp 600ms cubic-bezier(0.4, 0, 0.2, 1) both;
  animation-delay: 1000ms;
}

@keyframes legendSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== TOOLTIP ANIMATIONS ===== */
.chart-tooltip-enter {
  animation: tooltipPopIn 200ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

@keyframes tooltipPopIn {
  from {
    opacity: 0;
    transform: scale(0.8) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* ===== HOVER ANIMATIONS ===== */
.chart-element-hover {
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.chart-element-hover:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
  cursor: pointer;
}

/* Bar hover effect */
.recharts-bar-rectangle:hover {
  filter: brightness(1.2) saturate(1.3);
  transition: filter 200ms ease;
}

/* Line dot hover effect */
.recharts-line-dot:hover {
  transform: scale(1.5);
  transition: transform 200ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Pie sector hover effect */
.recharts-pie-sector:hover {
  transform: scale(1.05);
  filter: brightness(1.1);
  transition: all 200ms ease;
}

/* ===== DATA UPDATE ANIMATIONS ===== */
.chart-data-update .recharts-bar-rectangle {
  animation: dataUpdatePulse 400ms ease both;
}

.chart-data-update .recharts-line-curve {
  animation: dataUpdateGlow 600ms ease both;
}

@keyframes dataUpdatePulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

@keyframes dataUpdateGlow {
  0%, 100% {
    filter: drop-shadow(0 0 0 transparent);
  }
  50% {
    filter: drop-shadow(0 0 8px var(--color-primary));
  }
}

/* ===== LOADING ANIMATIONS ===== */
.chart-loading {
  position: relative;
}

.chart-loading::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 100%
  );
  animation: chartShimmer 2s infinite;
  z-index: 1;
}

@keyframes chartShimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */
.chart-performance-mode .recharts-bar-rectangle,
.chart-performance-mode .recharts-line-curve,
.chart-performance-mode .recharts-pie-sector,
.chart-performance-mode .recharts-area-area {
  animation: none !important;
  transition: none !important;
}

/* ===== REDUCED MOTION SUPPORT ===== */
@media (prefers-reduced-motion: reduce) {
  .chart-enter-active,
  .chart-exit-active,
  .bar-chart-enter .recharts-bar-rectangle,
  .line-chart-enter .recharts-line-curve,
  .line-chart-enter .recharts-line-dot,
  .pie-chart-enter .recharts-pie-sector,
  .area-chart-enter .recharts-area-area,
  .area-chart-enter .recharts-area-curve,
  .scatter-chart-enter .recharts-scatter-symbol,
  .chart-axis-enter .recharts-cartesian-axis-line,
  .chart-axis-enter .recharts-cartesian-axis-tick-line,
  .chart-grid-enter .recharts-cartesian-grid-horizontal line,
  .chart-grid-enter .recharts-cartesian-grid-vertical line,
  .chart-legend-enter .recharts-legend-wrapper,
  .chart-tooltip-enter,
  .chart-data-update .recharts-bar-rectangle,
  .chart-data-update .recharts-line-curve,
  .chart-loading::before {
    animation: none !important;
    transition: none !important;
  }
  
  .chart-element-hover:hover,
  .recharts-bar-rectangle:hover,
  .recharts-line-dot:hover,
  .recharts-pie-sector:hover {
    transform: none !important;
    filter: none !important;
  }
}
